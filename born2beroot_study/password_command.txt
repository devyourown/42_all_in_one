passwd : passwd는 기본적으로 패스워드를 부여하거나 패스워드를 변경하는 명령이지만,
계정을 사용하지 못하게 하거나, 패스워드 만기일 및 유효 기간등을 설정할 수 있습니다.

passwd <username> : 사용자 비밀번호 변경

sudo passwd : 현재 로그인된 계정 비밀번호를 변경하라는 의미가 됩니다.

-a : -S 옵션과 같이 쓴다. all이라는 뜻이다.
-S : 사용자에 대한 패스워드 정보를 알 수 있다.
-l : 사용자의 패스워드에 잠금을 걸어 로그인을 막는다.
-u : 사용자에게 설정되어 있는 패스워드 잠금을 푼다.
-d : 사용자의 패스워드를 제거한다.
-n : 패스워드 변경까지의 최소 날짜를 설정한다.
-x : 현재 패스워드의 유효기간을 지정한다.
-w : 패스워드 만료 전 경고 날짜를 지정한다.
-i : 패스워드 만료 뒤 불능까지 유예기간을 설정한다.
-e : 다음 로그인 시에 반드시 패스워드를 변경하도록 설정한다.

chage : chage는 사용자의 패스워드에 대한 정보를 출력하고 설정하는 명령어입니다.
/etc/shadow(비밀번호 관련 저장 파일)의 날짜 관련 필드 설정을 모두 할 수 있는 명령입니다.
passwd와 거의 공통된 기능을 가지고 있는데, 다른 점은 날짜에 관련된 특화된 기능을 가지고 있습니다.

chage -l <usrname>: 사용자 비밀번호 정보 출력

-d : 최근 패스워드를 바꾼 날을 수정합니다.
-m : 패스워드 변경의 최소 날짜를 지정합니다.
-M : 패스워드 변경의 최대 날짜를 지정합니다.
-I : 유예기간을 설정합니다.
-E : 계정이 만기되는 날을 지정합니다. MM/DD/YY or YYYY-MM-DD
-W : 변경을 요구하는 경고 날짜를 지정합니다.

다음 줄을 찾습니다.
password requisite pam_cracklib.so retry=3 minlen=8 difok=3
여기에서 구성할 수 있는 옵션은 다음과 같습니다.
retry : 시스템이 인증 오류를 반환하고 쫒겨날 때까지 할 수 있는 시도 횟수
minlen: 암호의 최소 길이
difok: 기존 암호와 달라야 하는 문자의 개수
ucredit: 최소 또는 최대이어야 하는 대문자
lcredit: 최소 또는 최대이어야 하는 소문자.
dcredit: 최소 또는 최대로 가져야 하는 자릿수.
ocredit: 키가 가져야 하는 다른 문자의 최소 또는 최대 수.
reject_username: 비밀번호에 유저명이 포함되지 않아야함.
enforce_for_root: 루트계정에도 해당 규칙 적용
maxrepeat: 같은 문자가 몇번 이상 반복되면 안됨

패스워드 정책을 설정하기 위해 PAM(Plaggable Authentication Module)을 설치한다.
PAM 이란 사용자를 인증하고 응용 프로그램에 대한 사용 권한을 제어하는 프로그램이다.
PAM 을 사용하기 이전에는 리눅스 시스템에서 사용자를 인증하기 위해 사용자 정보가
담긴 주요 시스템 파일인 /etc/passwd 에 대한 접근 권한을 가지고 있어야 했다.
이는 보안상 위험했기 때문에 PAM 이 등장하게 되었다.
PAM 의 동작원리는 다음과 같다.
인증이 필요한 응용 프로그램은 더 이상 passwd 파일을 열지 않고, PAM 모듈에 사용자 인증을 요청한다.
PAM 은 인증을 요청한 사용자의 정보를 통해 결과를 도출하여 응용 프로그램에 전달한다.
사용자가 설정한 정책 이외에도 PAM 자체적으로 설정한 정책(연속된 숫자나 알파벳 등)이 존재한다

패스워드 정책을 가지고 있는 파일 : /etc/pam.d/common-password

패스워드 정책 설정을 위해 다음 모듈을 설치한다. sudo apt install libpam-cracklib
